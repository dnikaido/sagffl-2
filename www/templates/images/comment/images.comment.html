<ion-view title="{{ comment.image.title }}">
  <ion-content class="has-tabs">
    <div class="item item-body">
      <div class="image-container">
        <img class="short-image"
             ng-src="{{ comment.image.url }}"
             ng-click="comment.gallery.showImage(comment.image)">
      </div>
      <p class="subdued">Submitted by {{ comment.image.uploader }}</p>
      <p>
        <span class="subdued">{{ comment.image.votes.length || '0' }} Votes</span>
        <span class="subdued">{{ comment.image.comments.length || '0'}} Comments</span>
      </p>
    </div>
    <div ng-repeat="post in comment.image.comments | orderBy: 'timestamp'"
         class="item item-body">
      <div class="comment-subtext">
        {{ post.username }}
        <span class="comment-time">{{ comment.getFromNow(post.timestamp) }}</span>
      </div>
      <div class="comment-post">
        {{ post.text }}
      </div>
    </div>
    <div ng-if="!comment.username"
         class="item item-body">
      <button ng-click="comment.login()"
              class="button button-block button-positive">Log in to comment</button>
    </div>
    <div ng-if="comment.username"
         class="item item-input-inset">
      <label class="item-input-wrapper">
        <input ng-model="comment.text"
               type="text"
               placeholder="Write a comment">
      </label>
      <button ng-click="comment.add()"
              class="button button-icon icon ion-paper-airplane"></button>
    </div>

  </ion-content>
</ion-view>
